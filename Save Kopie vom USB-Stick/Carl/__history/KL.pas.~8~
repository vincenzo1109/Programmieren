unit KL;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, ExtCtrls, StdCtrls;

type
  TForm1 = class(TForm)
    Button1: TButton;
    Edit2: TEdit;
    Label1: TLabel;
    LabelPoints: TLabel;
    LabelPinsLeft: TLabel;
    PaintBox1: TPaintBox;
    procedure Button1Click(Sender: TObject);
    procedure FormCreate(Sender: TObject);
    procedure WerHatGewonnen();
    procedure Reset();
  private
    { Private-Deklarationen }
  public
    { Public-Deklarationen }
  end;

var
  Form1: TForm1;
  PinRest, player, Player1Points, Player2Points: integer;

implementation

{$R *.dfm}


procedure TForm1.FormCreate(Sender: TObject);
begin
  PinRest := 21;
  player := 0;
  LabelPinsLeft.Caption := IntToStr(21);

end;


procedure TForm1.Button1Click(Sender: TObject);
var
  PinToken: integer;
begin
  PinToken := StrToInt(Edit2.Text);

  if (PinToken < 0) OR (PinToken > 3) then
    MessageDlg('Die Zahl muss zwischen 1 und 3 sein', TMsgDlgType.mtInformation, [TMsgDlgBtn.mbOK], 0)
  else if PinToken > PinRest then
    MessageDlg('Sind nicht mehr genug Streichhölzer da', TMsgDlgType.mtInformation, [TMsgDlgBtn.mbOK], 0)
  else
  begin
    player := player + 1;
    PinRest := PinRest - PinToken;
    if PinRest = 0 then
      WerHatGewonnen();

    LabelPoints.Caption := IntToStr(Player1Points) + ' : ' + IntToStr(Player2Points);
    LabelPinsLeft.Caption := IntToStr(PinRest);
  end;
end;


procedure TForm1.WerHatGewonnen();
begin
  if player Mod 2 = 0 then
  begin
    MessageDlg('Spieler 1 hat gewonnen', TMsgDlgType.mtInformation, [TMsgDlgBtn.mbOK], 0);
    Player1Points := Player1Points + 1;
  end
  else
  begin
    MessageDlg('Spieler 2 hat gewonnen', TMsgDlgType.mtInformation, [TMsgDlgBtn.mbOK], 0);
    Player2Points := Player2Points + 1;
  end;
  Reset();
end;


procedure TForm1.Reset();
begin
  PinRest := 21;
  player := 0;
end;
end.
